create materialized view sailmw
build immediate
refresh complete on demand
AS
select s.sid, s.sname from sailors s;

select * from sailmw;

insert into sailmw(sid,sname) values(10,'Rani');

update sailmw set sname='raghu' where sid=7;

insert into sailors values(10,'Raghu',35 ,9);

select * from sailors;

select * from sailmw;

begin 
DBMS_mview.refresh('sailmw');
end;

select * from sailmw;

---------------------------------------------------------------


create table stu
(
rollno integer,
name varchar2(20),
branch varchar2(20)
);

insert into stu values (201, 'Ramesh', 'Mech');
begin
savepoint A;
end;
insert into stu values (202, 'Geeta', 'Civil');
begin
savepoint B;
end;
update stu set branch = 'IT' where stuID = 201;
select * form stu;
begin
RollBack To B;   --- Undo update and 202 insertion remains
end;
select * from stu;
begin
RollBack To A;   --- Undo up to savepoint A (only 201 remains)
end;
select * from stu;
commit;  --- Permanently saves stu 201 record

select * from stu;
delete from stu;
begin 
RollBack;
end;

select * from stu;
truncate table stu;
begin;
RollBack;
end;

